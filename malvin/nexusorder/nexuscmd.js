import moment from 'moment-timezone';
import fs from 'fs';
import os from 'os';
import pkg, { prepareWAMessageMedia } from '@whiskeysockets/baileys';
const { generateWAMessageFromContent, proto } = pkg;
import config from '../../config.cjs';

const alive = async (m, sock) => {
  const prefix = config.PREFIX;
  const mode = config.MODE;
  const pushName = m.pushName || 'User';

  const cmd = m.body.startsWith(prefix)
    ? m.body.slice(prefix.length).split(' ')[0].toLowerCase()
    : '';

  if (cmd === "menu") {
    await m.React('â³'); // React with a loading icon
    // Calculate uptime

    const uptimeSeconds = process.uptime();
    const days = Math.floor(uptimeSeconds / (24 * 3600));
    const hours = Math.floor((uptimeSeconds % (24 * 3600)) / 3600);
    const minutes = Math.floor((uptimeSeconds % 3600) / 60);
    const seconds = Math.floor(uptimeSeconds % 60);

    
    // Get real time
    const realTime = moment().tz("Africa/Harare").format("HH:mm:ss");
    const xtime = moment.tz("Africa/Harare").format("HH:mm:ss");
    const xdate = moment.tz("Africa/Harare").format("DD/MM/YYYY");
    const time2 = moment().tz("Afeica/Harare").format("HH:mm:ss");
let pushwish = "";

if (time2 < "05:00:00") {
  pushwish = `Good Morning ğŸŒ„`;
} else if (time2 < "11:00:00") {
  pushwish = `Good Morning ğŸŒ„`;
} else if (time2 < "15:00:00") {
  pushwish = `Good Afternoon ğŸŒ…`;
} else if (time2 < "18:00:00") {
  pushwish = `Good Evening ğŸŒƒ`;
} else if (time2 < "19:00:00") {
  pushwish = `Good Evening ğŸŒƒ`;
} else {
  pushwish = `Good Night ğŸŒŒ`;
}

    const aliveMessage = `â•­â”ˆâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â€¢*
 *â‡†ğ™·ğ™´ğ™»ğ™»ğ™¾ á´œsá´‡Ê€â‡†*
          *${pushName}* _${pushwish}_
  *â‡† âœ¨ É´á´‡xá´œs á´á´… ğ™²á´á´… ğ™»ğ™¸ğš‚ğšƒ âœ¨ â‡†*
*â•°â”ˆâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â€¢*
*â•­â”ˆâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â€¢* 
*â”Š  â—¦* Ê™á´á´› É´á´€á´á´‡: É´á´‡xá´œs á´á´…
*â”Š  â—¦* á´ á´‡Ê€sÉªá´É´: 2.0.1
*â”Š  â—¦* á´…á´‡á´ : á´›á´‡á´„ÊœÊŸá´Ê€á´…
*â”Š  â—¦* á´˜Ê€á´‡Ò“Éªx: *${prefix}*
*â”Š  â—¦* á´á´á´…á´‡: *${mode}*
*â”Š  â—¦* á´œá´˜á´›Éªá´á´‡: *${days}d ${hours}h ${minutes}m ${seconds}s*
*â”Š  â—¦* á´„á´œÊ€Ê€á´‡É´á´› á´›Éªá´á´‡: *${realTime}*
*â•°â”ˆâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â€¢*
*â™¡ï¸â€¢â”â”â”â”‰â”‰â”‰â”‰â”‰â˜»â”‰â”‰â”‰â”‰â”‰â”‰â”‰â”â”â€¢â™¡ï¸*

    *[ â€¢ ğŸ¤´ ğ™¾ğš†ğ™½ğ™´ğš ğ™²ğ™¼ğ™³ ğŸ¤´ â€â€¢ ]*
*â•­â”ˆâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â€¢*
*â”‹* *${prefix}Ê™ÊŸá´á´„á´‹*
*â”‹* *${prefix}á´œÉ´Ê™ÊŸá´á´„á´‹*
*â”‹* *${prefix}á´Šá´ÉªÉ´*
*â”‹* *${prefix}ÊŸá´‡á´€á´ á´‡*
*â”‹* *${prefix}sá´‡á´›á´ á´€Ê€*
*â”‹* *${prefix}Ê€á´‡sá´›á´€Ê€á´›*
*â”‹* *${prefix}á´˜á´˜*
*â”‹* *${prefix}sÊœá´œá´›á´…á´á´¡É´*
*â•°â”ˆâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â€¢*

    *[ â€¢ ğŸ” ğš‚ğ™´ğ™°ğšğ™²ğ™· ğ™²ğ™¼ğ™³ ğŸ” â€â€¢ ]*
*â•­â”ˆâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â€¢*
*â”‹* *${prefix}Êá´›s*
*â”‹* *${prefix}É¢á´á´É¢ÊŸá´‡*
*â”‹* *${prefix}Éªá´É¢*
*â”‹* *${prefix}Éªá´á´…Ê™*
*â”‹* *${prefix}á´˜ÊŸá´€Êsá´›á´Ê€á´‡*
*â”‹* *${prefix}á´¡á´‡á´€á´›Êœá´‡Ê€*
*â”‹* *${prefix}É´á´‡á´¡s*
*â•°â”ˆâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â€¢*

      *[ â€¢ ğŸ§  ğ™°ğ™¸ ğ™²ğ™¼ğ™³ ğŸ§   â€â€¢ ]*
*â•­â”ˆâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â€¢*
*â”‹* *${prefix}Ê™ÊŸá´€á´„á´‹Ê™á´xá´€Éª*
*â”‹* *${prefix}á´ ÉªsÉªá´›*
*â”‹* *${prefix}É¢á´˜á´›*
*â•°â”ˆâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â€¢*

  *[ â€¢ ğŸ“¥ DOWNLOADER-CMD ğŸ“¥ â€â€¢ ]*
*â•­â”ˆâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â€¢*
*â”‹* *${prefix}Ò“Ê™*
*â”‹* *${prefix}ÉªÉ´êœ±á´›á´€*
*â”‹* *${prefix}á´ Éªá´…á´‡á´*
*â”‹* *${prefix}É¢á´…Ê€Éªá´ á´‡*
*â”‹* *${prefix}á´›á´¡Éªá´›á´›á´‡Ê€*
*â”‹* *${prefix}á´›Éªá´‹á´›á´á´‹*
*â”‹* *${prefix}á´á´‡á´…Éªá´€Ò“ÉªÊ€á´‡*
*â”‹* *${prefix}êœ±á´É´É¢*
*â”‹* *${prefix}á´ Éªá´…á´‡á´*
*â”‹* *${prefix}á´€á´˜á´‹*
*â”‹* *${prefix}á´›á´›á´€á´œá´…Éªá´*
*â•°â”ˆâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â€¢*

    *[ â€¢ ğŸš» GROUP-CMD ğŸš» â€â€¢ ]*
*â•­â”ˆâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â€¢*
*â”‹*â›”ï¸ *${prefix}á´…á´‡ÊŸ <Ê€á´‡á´˜ÊŸÊ Ò“á´Ê€ á´…á´‡ÊŸá´‡á´›á´‡ sá´s>*
*â”‹*ğŸ¤ *${prefix}á´€á´…á´…*
*â”‹*ğŸ¦µ *${prefix}á´‹Éªá´„á´‹*
*â”‹*ğŸ¤— *${prefix}á´¡á´‡ÊŸá´„á´á´á´‡ ğš˜ğš—*
*â”‹*ğŸ¤— *${prefix}á´¡á´‡ÊŸá´„á´á´á´‡ ğš˜ğšğš*
*â”‹*ğŸ«… *${prefix}á´˜Ê€á´á´á´á´›á´‡*
*â”‹*ğŸ¤µ *${prefix}á´…á´‡á´á´á´›á´‡*
*â”‹*ğŸ³ *${prefix}á´›á´€É¢á´€ÊŸÊŸ*
*â”‹*ğŸ“› *${prefix}ğš‘ğš’ğšğšğšğšŠğš*
*â”‹*â™»ï¸ *${prefix}ÉªÉ´á´ Éªá´›á´‡*
*â”‹*ğŸ”‡ *${prefix}á´á´œá´›á´‡*
*â”‹*ğŸ”Š *${prefix}á´œÉ´á´á´œá´›á´‡*
*â”‹*ğŸ”’ *${prefix}É¢Ê€á´á´œá´˜ ğš˜ğš™ğšğš—*
*â”‹*ğŸ”“ *${prefix}É¢Ê€á´á´œá´˜ ğšŒğš•ğš˜ğšœğš*
*â”‹*ğŸ˜ *${prefix}ÊŸá´‡á´€á´ á´‡*
*â•°â”ˆâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â€¢*

    *[ â€¢ ğŸ™ï¸ ğ™°ğš„ğ™³ğ™¸ğ™¾ ğ™²ğ™¼ğ™³ ğŸ™ï¸ â€â€¢ ]*
*â•­â”ˆâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â€¢*
*â”‹* *${prefix}á´…á´‡á´‡á´˜*
*â”‹* *${prefix}Ê™á´€ss*
*â”‹* *${prefix}Ê€á´Ê™á´á´›*
*â”‹* *${prefix}ğšá´‡á´ á´‡Ê€sá´‡*
*â”‹* *${prefix}sÊŸá´á´¡*
*â”‹* *${prefix}sá´á´á´á´›Êœ*
*â”‹* *${prefix}É´ÉªÉ¢Êœá´›á´„á´Ê€á´‡*
*â•°â”ˆâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â€¢*

    *[ â€¢ â˜£ ğš‚ğšƒğ™¸ğ™²ğ™ºğ™´ğš ğ™²ğ™¼ğ™³ â˜£ â€â€¢ ]*
*â•­â”ˆâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â€¢*
*â”‹* *${prefix}á´˜á´á´‹á´‡*
*â”‹* *${prefix}á´…á´€É´á´„á´‡*
*â”‹* *${prefix}Êœá´€á´˜á´˜Ê*
*â”‹* *${prefix}á´¡ÉªÉ´á´‹*
*â”‹* *${prefix}á´‹ÉªÊŸÊŸ*
*â”‹* *${prefix}á´‹Éªá´„á´‹*
*â”‹* *${prefix}Ê™Éªá´›á´‡*
*â”‹* *${prefix}sÊŸá´€á´˜*
*â”‹* *${prefix}Êá´‡á´‡á´›*
*â”‹* *${prefix}sá´ÉªÊŸá´‡*
*â”‹* *${prefix}á´¡á´€á´ á´‡*
*â”‹* *${prefix}ÊœÉªÉ¢ÊœÒ“Éªá´ á´‡*
*â”‹* *${prefix}Ê™ÊŸá´œsÊœ*
*â”‹* *${prefix}É´á´á´*
*â”‹* *${prefix}Ê™á´É´á´‹*
*â”‹* *${prefix}sá´á´œÉ¢*
*â”‹* *${prefix}á´˜á´€á´›*
*â”‹* *${prefix}ÊŸÉªá´„á´‹*
*â”‹* *${prefix}á´‹Éªss*
*â”‹* *${prefix}á´€á´¡á´á´*
*â”‹* *${prefix}Êœá´œÉ¢*
*â”‹* *${prefix}á´„Ê€Ê*
*â”‹* *${prefix}á´„á´œá´…á´…ÊŸá´‡*
*â”‹* *${prefix}Ê™á´œÊŸÊŸÊ*
*â•°â”ˆâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â€¢*

     *[ â€¢ ğŸ¤“ ğ™¾ğšƒğ™·ğ™´ğš ğ™²ğ™¼ğ™³ ğŸ¤“ â€â€¢ ]*
*â•­â”ˆâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â€¢*
*â”‹* *${prefix}Ò“á´€É´á´„Ê*
*â”‹* *${prefix}á´‡Ê™ÉªÉ´á´€Ê€Ê*
*â”‹* *${prefix}á´…Ê™ÉªÉ´á´€Ê€Ê*
*â”‹* *${prefix}É¢á´‡á´›*
*â”‹* *${prefix}Ò“á´‡á´›á´„Êœ*
*â”‹* *${prefix}á´œá´˜á´…á´€á´›á´‡É´á´á´¡*
*â”‹* *${prefix}á´á´˜3*
*â”‹* *${prefix}á´›á´›s*
*â”‹* *${prefix}sÊœá´Ê€á´›á´‡É´ /sá´œÊ€ÊŸ*
*â”‹* *${prefix}á´›á´‡á´á´˜á´á´€ÉªÊŸ*
*â”‹* *${prefix}á´„Êœá´‡á´„á´‹á´á´€ÉªÊŸ*
*â•°â”ˆâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â€¢*

   *[ â€¢ ğŸ¤“ ğš‚ğšƒğ™°ğ™»ğ™ºğ™´ğš ğ™²ğ™¼ğ™³ ğŸ¤“ â€â€¢ ]*
*â•­â”ˆâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â€¢*
*â”‹* *${prefix}É¢Éªá´›sá´›á´€ÊŸá´‹*
*â”‹* *${prefix}á´›Éªá´‹sá´›á´€ÊŸá´‹*
*â”‹* *${prefix}É´á´˜á´sá´›á´€ÊŸá´‹*
*â”‹* *${prefix}á´˜á´á´˜ÉªÉ´Ò“á´*
*â”‹* *${prefix}ÊŸá´á´á´‹á´œá´˜*
*â”‹* *${prefix}á´¡á´€á´„Êœá´€É´É´á´‡ÊŸ*
*â•°â”ˆâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â€¢*

    *[ â€¢ ğŸ¤µğ™·ğ™´ğšğ™¾ğ™ºğš„ ğ™²ğ™»ğ™¸ğ™´ğ™½ğšƒğŸ¤µ â€â€¢ ]*
*â•­â”ˆâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â€¢*
*â”‹* *${prefix}á´á´á´…á´‡ <ğ™¿ğš„ğ™±ğ™»ğ™¸ğ™²/ğ™¿ğšğ™¸ğš…ğ™°ğšƒğ™´>*
*â”‹* *${prefix}á´˜Ê€á´‡Ò“Éªx <ğš‚ğšˆğ™¼ğ™±ğ™¾ğ™»>*
*â”‹* *${prefix}á´€á´œá´›á´sá´ Éªá´‡á´¡ <ğ™¾ğ™½/ğ™¾ğ™µğ™µ>*
*â”‹* *${prefix}á´€á´œá´›á´Ê€á´‡á´€á´„á´› <ğ™¾ğ™½/ğ™¾ğ™µğ™µ>*
*â”‹* *${prefix}á´€ÊŸá´¡á´€Êsá´É´ÊŸÉªÉ´á´‡ <ğ™¾ğ™½/ğ™¾ğ™µğ™µ>*
*â”‹* *${prefix}á´€á´œá´›á´Ê€á´‡á´€á´… <ğ™¾ğ™½/ğ™¾ğ™µğ™µ>*
*â”‹* *${prefix}á´€á´œá´›á´Ê™ÊŸá´á´„á´‹ <ğ™¾ğ™½/ğ™¾ğ™µğ™µ>*
*â”‹* *${prefix}á´€É´á´›Éªá´„á´€ÊŸÊŸ <ğ™¾ğ™½/ğ™¾ğ™µğ™µ>*
*â”‹* *${prefix}á´€á´œá´›á´Ê€á´‡á´„á´Ê€á´…ÉªÉ´É¢ <ğ™¾ğ™½/ğ™¾ğ™µğ™µ>*
*â”‹* *${prefix}á´€á´œá´›á´á´›Êá´˜ÉªÉ´É¢ <ğ™¾ğ™½/ğ™¾ğ™µğ™µ>*
*â•°â”ˆâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â€¢*

> ğŸ‘¾ á´á´Ê€á´‡ á´„á´á´…s sá´á´É´ á´Ê€ ÊŸá´€á´›á´‡Ê€ ğŸ¤–`;

    await m.React('âœ…'); // React with a success icon

    sock.sendMessage(
      m.from,
      {
        text: aliveMessage,
        contextInfo: {
          isForwarded: false,
          forwardedNewsletterMessageInfo: {
            newsletterJid: '@newsletter',
            newsletterName: "Nexus-MD",
            serverMessageId: -1,
          },
          forwardingScore: 999, // Score to indicate it has been forwarded
          externalAdReply: {
            title: "ğŸš€ Nexus-MD ğŸš€",
            body: "Nexus Menu",
            thumbnailUrl: 'https://files.catbox.moe/ktd1l4.jpg', // Add thumbnail URL if required
            sourceUrl: 'https://whatsapp.com/channel/0029Vac8SosLY6d7CAFndv3Z', // Add source URL if necessary
            mediaType: 1,
            renderLargerThumbnail: true,
          },
        },
      },
      { quoted: m }
    );
  }
};

export default alive;
